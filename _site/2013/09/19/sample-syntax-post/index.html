<!DOCTYPE html>
<html>
    <head>
        <meta charset="utf-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
        <title>A Post With Syntax Highlighting</title>
        <meta name="viewport" content="width=device-width">

        <link rel="stylesheet" href="/css/normalize.css">
        <link rel="stylesheet" href="/css/base.css">
        <link rel="stylesheet" href="/css/skeleton.css">

        <!-- syntax highlighting CSS -->
        <link rel="stylesheet" href="/css/syntax.css">

        <!-- Custom CSS -->
        <link href='http://fonts.googleapis.com/css?family=Open+Sans:300italic,400italic,600italic,400,300,600,700' rel='stylesheet' type='text/css'>

        <link rel="stylesheet" href="/css/main.css">
        <link rel="stylesheet" type="text/css" href="/css/type.css">

    </head>
    <body>

        <div class="site">

                    <div class="band header">
            <div class="container">
              <div class="sixteen columns">
              <h1 class="title"><a href="/">Pyramid</a></h1>

              </div>
            </div>
          </div>



          <div class="container">

<div class="twelve columns">

<h2>A Post With Syntax Highlighting</h2>
<p class="meta">19 Sep 2013</p>

<div class="post">
<div class="highlight"><pre><code class="ruby language-ruby" data-lang="ruby"><span class="c1">#process each packet and add to sequence if checksum is correct</span>
    <span class="k">def</span> <span class="nf">process_packet</span><span class="p">(</span><span class="n">offset</span><span class="p">,</span> <span class="n">stream</span><span class="p">,</span> <span class="n">sequence</span><span class="p">)</span>
        <span class="n">header</span> <span class="o">=</span> <span class="n">stream</span><span class="o">.</span><span class="n">unpack</span><span class="p">(</span><span class="s2">&quot;x</span><span class="si">#{</span><span class="n">offset</span><span class="si">}</span><span class="s2">NNN&quot;</span><span class="p">)</span>
        <span class="n">seq</span><span class="p">,</span> <span class="n">chk</span><span class="p">,</span> <span class="n">length</span> <span class="o">=</span> <span class="n">header</span><span class="o">[</span><span class="mi">0</span><span class="o">]</span><span class="p">,</span> <span class="n">header</span><span class="o">[</span><span class="mi">1</span><span class="o">]</span><span class="p">,</span> <span class="n">header</span><span class="o">[</span><span class="mi">2</span><span class="o">]</span>
        <span class="n">data</span> <span class="o">=</span> <span class="n">stream</span><span class="o">.</span><span class="n">unpack</span><span class="p">(</span><span class="s2">&quot;x</span><span class="si">#{</span><span class="n">offset</span><span class="o">+</span><span class="mi">12</span><span class="si">}</span><span class="s2">C</span><span class="si">#{</span><span class="n">length</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
        <span class="n">chunks</span> <span class="o">=</span> <span class="n">get_chunks</span><span class="p">(</span><span class="n">data</span><span class="o">.</span><span class="n">clone</span><span class="p">,</span> <span class="n">length</span><span class="p">,</span> <span class="mh">0xAB</span><span class="p">)</span>

        <span class="k">if</span><span class="p">(</span><span class="n">get_checksum</span><span class="p">(</span><span class="n">seq</span><span class="p">,</span> <span class="n">chunks</span><span class="p">)</span> <span class="o">==</span> <span class="n">chk</span><span class="p">)</span>
            <span class="n">sequence</span><span class="o">[</span><span class="n">seq</span><span class="o">]</span> <span class="o">=</span> <span class="n">data</span>
        <span class="k">end</span>

        <span class="n">offset</span> <span class="o">+=</span> <span class="n">length</span> <span class="o">+</span> <span class="mi">12</span>

        <span class="k">if</span><span class="p">(</span><span class="n">offset</span> <span class="o">&lt;</span> <span class="n">stream</span><span class="o">.</span><span class="n">length</span><span class="p">)</span>
            <span class="n">process_packet</span><span class="p">(</span><span class="n">offset</span><span class="p">,</span> <span class="n">stream</span><span class="p">,</span> <span class="n">sequence</span><span class="p">)</span>
        <span class="k">else</span>
            <span class="n">sort_sequence</span><span class="p">(</span><span class="n">sequence</span><span class="p">)</span>
        <span class="k">end</span>
    <span class="k">end</span>
</code></pre></div>
</div>

</div>


<div class="four columns sidebar">

	              	<a class="extra" href="/">home</a>
              	<a class="extra" href="/about">about</a>
              	<a class="extra" href="/projects">projects</a>
  <h4>Recent Posts</h4>
  <ul class="posts">
    
      <li>
      	<span>22 Sep 2013</span>
      	<a href="/2013/09/22/hello-pyramid/">A Jekyll theme to stand the test of time.</a>
      </li>
    
      <li>
      	<span>20 Sep 2013</span>
      	<a href="/2013/09/20/sample-text-post/">A Text Post</a>
      </li>
    
      <li>
      	<span>19 Sep 2013</span>
      	<a href="/2013/09/19/sample-syntax-post/">A Post With Syntax Highlighting</a>
      </li>
    
      <li>
      	<span>18 Sep 2013</span>
      	<a href="/2013/09/18/sample-image-post/">An Image Post</a>
      </li>
    
      <li>
      	<span>17 Sep 2013</span>
      	<a href="/2013/09/17/sample-video-post/">A Video Post</a>
      </li>
    
  </ul>




</div>

</div>

          <div class="band footer">
            <div class="container">
              <div class="sixteen columns centered contact">
                <p>
                  Your Name
                  What You Are
                  you@example.com
                </p>
              </div>

            </div>
          </div>

        </div>

    </body>
</html>
